<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<link rel="icon" href="{{ asset('assets/img/sopay.png') }}">
		<meta
		name="viewport" content="width=device-width, initial-scale=1.0">

		{# Feuilles de styles #}
		<link rel="stylesheet" href="{{asset('assets/css/bootstrap.min.css')}}"> {% block stylesheets %}{% endblock %}
		<link
		rel="stylesheet" href="{{asset('assets/css/styles.css')}}">

		{# Fichiers Js #}
		<script type='text/javascript' src="{{asset('assets/js/jquery.min.js')}}" defer></script>
		<script src="{{asset('assets/js/bootstrap.bundle.min.js')}}" defer></script>
		{% block javascripts %}{% endblock %}
		<script type='text/javascript' src="{{asset('assets/js/scripts.js')}}" defer></script>

	</head>

	{# {% block body %}{% endblock %} #}
	<body>
		<div class="container card-0 justify-content-center">
			<div class="card-body px-sm-4 px-0">
				<div class="row justify-content-center round">
					<div class="col-lg-10 col-md-12">
						<div class="card shadow-lg card-1">
							<div class="card-body inner-card">
								<div class="row justify-content-center">
									<div class="col-lg-10 col-md-6 col-sm-12 ">
										<form action={{path('sendToApi')}} method="POST">
											<div class="row justify-content-end">
												<h4 class="mb-3 text-center" style="color:#fc7001; font-weight:bold;">Transaction details</h4>
												<p>
													<strong>Shop name</strong>
													:
													{{ shopName }}
												</p>
												<p>
													<strong>Order ID</strong>
													:
													{{ orderId }}
												</p>
												<p>
													<strong>Amount</strong>
													:
													{{ amount }}
													{{ currency }}
												</p>
												<p>
													<strong>Description</strong>
													:
													{{ description }}
												</p>
											</div>
											<div class="radio-group text-center">
												<h4 class="mb-5" style="color:#fc7001; font-weight:bold;">Payment method</h4>

												{% if service == '' %}
													<div class="row ">
														<div class="col-lg-3 col-md-6 col-6 mb-4">
															<label>
																<input id="om" type="radio" name="radio-button" value="orange_money_CM" required>
																<img src="{{ asset('assets/img/OM.png') }}" alt="om">
															</label>
															<small>
																<strong>Orange Money CM</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4">
															<label>
																<input id="mtn" type="radio" name="radio-button" value="mtn_mobile_money_CM">
																<img src="{{ asset('assets/img/MTN.png') }}" alt="mtn">
															</label>
															<small>
																<strong>MTN Mobile Money CM</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4">
															<label>
																<input id="eu" type="radio" name="radio-button" value="express_union">
																<img src="{{asset('assets/img/EU.png') }}" alt="eu">
															</label>
															<small>
																<strong>Express Union</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4">
															<label>
																<input id="paypal" type="radio" name="radio-button" value="paypal">
																<img src="{{ asset('assets/img/PAYPAL.png') }}" alt="paypal">
															</label>
															<small>
																<strong>Paypal</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="pm" type="radio" name="radio-button" value="perfect_money">
																<img src="{{ asset('assets/img/PM.png') }} " alt="pm">
															</label>
															<small>
																<strong>Perfect Money</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="visa" type="radio" name="radio-button" value="visa">
																<img src="{{asset('assets/img/VISA.png') }}" alt="visa">
															</label>
															<small>
																<strong>Visa</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="mastercard" type="radio" name="radio-button" value="mastercard">
																<img src="{{asset('assets/img/MASTER.png') }}" alt="mastercard">
															</label>
															<small>
																<strong>MasterCard</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="bitcoin" type="radio" name="radio-button" value="bitcoin">
																<img src="{{asset('assets/img/BITCOIN.png') }}" alt="bitcoin">
															</label>
															<small>
																<strong>Bitcoin</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="dogecoin" type="radio" name="radio-button" value="dogecoin">
																<img src="{{asset('assets/img/DOGE.png') }}" alt="dogecoin">
															</label>
															<small>
																<strong>Dogecoin</strong>
															</small>
														</div>
														<div class="col-lg-3 col-md-6 col-6 mb-4 collapse">
															<label>
																<input id="litecoin" type="radio" name="radio-button" value="litecoin">
																<img src="{{asset('assets/img/LITE.png') }}" alt="litecoin">
															</label>
															<small>
																<strong>Litecoin</strong>
															</small>
														</div>
													</div>
													<a id="showMoreLink" href="#" onclick="showMoreElements()">Voir plus</a>

												{% else %}

													{% if service == 'orange_money_CM' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="om" type="radio" name="radio-button" value="orange_money_CM" checked>
																<img src="{{ asset('assets/img/OM.png') }}" alt="om">
															</label>
															<br/><small>
																<strong>Orange Money CM</strong>
															</small>
														</div>
													{% elseif service == 'mtn_mobile_money_CM' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="mtn" type="radio" name="radio-button" value="mtn_mobile_money_CM" checked>
																<img src="{{ asset('assets/img/MTN.png') }}" alt="mtn">
															</label>
															<br/><small>
																<strong>MTN Mobile Money CM</strong>
															</small>
														</div>
													{% elseif service == 'express_union' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="eu" type="radio" name="radio-button" value="express_union" checked>
																<img src="{{asset('assets/img/EU.png') }}" alt="eu">
															</label>
															<br/><small>
																<strong>Express Union</strong>
															</small>
														</div>
													{% elseif service == 'paypal' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="paypal" type="radio" name="radio-button" value="paypal" checked>
																<img src="{{ asset('assets/img/PAYPAL.png') }}" alt="paypal">
															</label>
															<br/><small>
																<strong>Paypal</strong>
															</small>
														</div>
													{% elseif service == 'perfect_money' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="pm" type="radio" name="radio-button" value="perfect_money" checked>
																<img src="{{ asset('assets/img/PM.png') }} " alt="pm">
															</label>
															<br/><small>
																<strong>Perfect Money</strong>
															</small>
														</div>
													{% elseif service == 'visa' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="visa" type="radio" name="radio-button" value="visa" checked>
																<img src="{{ asset('assets/img/VISA.png') }} " alt="visa">
															</label>
															<br/><small>
																<strong>Visa</strong>
															</small>
														</div>
													{% elseif service == 'mastercard' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="mastercard" type="radio" name="radio-button" value="mastercard" checked>
																<img src="{{ asset('assets/img/MASTER.png') }} " alt="mastercard">
															</label>
															<br/><small>
																<strong>Mastercard</strong>
															</small>
														</div>
													{% elseif service == 'bitcoin' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="bitcoin" type="radio" name="radio-button" value="bitcoin" checked>
																<img src="{{asset('assets/img/BITCOIN.png') }}" alt="bitcoin">
															</label>
															<br/><small>
																<strong>Bitcoin</strong>
															</small>
														</div>
													{% elseif service == 'dogecoin' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="dogecoin" type="radio" name="radio-button" value="dogecoin" checked>
																<img src="{{asset('assets/img/DOGE.png') }}" alt="dogecoin">
															</label>
															<br/><small>
																<strong>Dogecoin</strong>
															</small>
														</div>
													{% elseif service == 'litecoin' %}
														<div class="justify-content-center">
															<label class="mb-4">
																<input id="litecoin" type="radio" name="radio-button" value="litecoin" checked>
																<img src="{{asset('assets/img/LITE.png') }}" alt="litecoin">
															</label>
															<br/><small>
																<strong>Litecoin</strong>
															</small>
														</div>
													{% endif %}

												{% endif %}
											</div>
											<div id="phone_div" class="form-group justify-content-center text-center" hidden>
												<label class="text-center" for="number">Phone number</label>
												<input type="number" class="form-control rounded-pill w-75 mx-auto" id="number" name="number" placeholder="000-000-000-000" minlength="4">
											</div>
											<div id="email_div" class="form-group justify-content-center text-center" hidden>
												<label for="email_paypal">Email Paypal</label>
												<input type="email" class="form-control rounded-pill w-75 mx-auto" id="email_paypal" name="email_paypal" placeholder="xxxxxxx@example.com">
											</div>

											<div id="confirmButton" class="row justify-content-center">
												<button type="submit" class="btn btn-primary btn-block mb-2 mt-4 rounded-pill  w-50 mx-auto">
													<small class="font-weight-bold">Confirmer</small>
													<span class="spinner-border spinner-border-sm ml-2 d-none" role="status" aria-hidden="true"></span>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
<script>
	const omRadio = document.getElementById('om');
const mtnRadio = document.getElementById('mtn');
const euRadio = document.getElementById('eu');
const pmRadio = document.getElementById('pm');
const visaRadio = document.getElementById('visa');
const mastercardRadio = document.getElementById('mastercard');
const paypalRadio = document.getElementById('paypal');
const dogeRadio = document.getElementById('dogecoin');
const liteRadio = document.getElementById('litecoin');
const bitRadio = document.getElementById('bitcoin');
const phoneDiv = document.getElementById('phone_div');
const emailDiv = document.getElementById('email_div');

function showInputDiv(inputDiv) {
phone_div.hidden = true;
email_div.hidden = true;
inputDiv.hidden = false;
}

{% if service == 'orange_money_CM' %}showInputDiv(phone_div);
omRadio.checked = true;
{% elseif service == 'mtn_mobile_money_CM' %}showInputDiv(phone_div);
mtnRadio.checked = true;
{% elseif service == 'express_union' %}showInputDiv(phone_div);
euRadio.checked = true;
{% elseif service == 'paypal' %}showInputDiv(email_div);
paypalRadio.checked = true;{% endif %}omRadio.addEventListener('change', () => {
phoneDiv.hidden = false;
emailDiv.hidden = true;
});
mtnRadio.addEventListener('change', () => {
phoneDiv.hidden = false;
emailDiv.hidden = true;
});
euRadio.addEventListener('change', () => {
phoneDiv.hidden = false;
emailDiv.hidden = true;
});
paypalRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = false;
});
dogeRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});
liteRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});
bitRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});
pmRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});
visaRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});
mastercardRadio.addEventListener('change', () => {
phoneDiv.hidden = true;
emailDiv.hidden = true;
});

const form = document.querySelector('form');
const button = form.querySelector('button[type="submit"]');
const spinner = button.querySelector('.spinner-border');

form.addEventListener('submit', function () {
button.setAttribute('disabled', 'disabled');
spinner.classList.remove('d-none');
});

function showMoreElements() {
	event.preventDefault();
  var radios = document.getElementsByClassName("col-lg-3");
  var link = document.getElementById("showMoreLink");
  var i;

  if (link.innerHTML === "Voir plus") {
    for (i = 4; i < radios.length; i++) {
      radios[i].classList.remove("collapse");
    }
    link.innerHTML = "Voir moins";
  } else {
    if (window.innerWidth >= 992) {
      for (i = 8; i < radios.length; i++) {
        radios[i].classList.add("collapse");
      }
    } else {
      for (i = 4; i < radios.length; i++) {
        radios[i].classList.add("collapse");
      }
    }
    link.innerHTML = "Voir plus";
  }
}

if (window.innerWidth >= 992) {
  var radios = document.getElementsByClassName("col-lg-3");
  var i;

  for (i = 0; i < 8; i++) {
    radios[i].classList.remove("collapse");
  }

  for (i = 8; i < radios.length; i++) {
    radios[i].classList.add("collapse");
  }
}

function scrollToConfirmButton() {
  var confirmButton = document.getElementById("confirmButton");
  confirmButton.scrollIntoView();
}

function selectRadio() {
  scrollToConfirmButton();
}

var radios = document.querySelectorAll('input[type="radio"]');
for (var i = 0; i < radios.length; i++) {
  radios[i].addEventListener('click', function() {
    selectRadio();
  });
}

</script>
